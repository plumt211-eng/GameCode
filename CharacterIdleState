using UnityEngine;

public class CharacterIdleState : CharacterState {

    public CharacterIdleState(Character character) : base(character) { }

    public override void Enter() {
        character.animator?.SetBool("IsMoving", false);
    }

    public override void Update() {
        Vector2 input = new Vector2(Input.GetAxisRaw("Horizontal"), Input.GetAxisRaw("Vertical"));

        // Movement input → MoveState
        if (input.sqrMagnitude > 0.01f) {
            character.ChangeState(new CharacterMoveState(character));
            return;
        }

        // Dodge input → DodgeState
        if (Input.GetKeyDown(KeyCode.Space) && character.canDodge) {
            character.ChangeState(new CharacterDodgeState(character, input));
            return;
        }

        // Attack input → AttackState
        if (Input.GetMouseButtonDown(0)) {
            character.ChangeState(new CharacterAttackState(character));
        }
    }
}

