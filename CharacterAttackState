using UnityEngine;

public class CharacterAttackState : CharacterState {
    private float attackDuration = 0.5f; // length of attack animation
    private float elapsedTime = 0f;

    public CharacterAttackState(Character character) : base(character) { }

    public override void Enter() {
        character.Attack(); // triggers animation and logic
        elapsedTime = 0f;
    }

    public override void Update() {
        elapsedTime += Time.deltaTime;

        // Wait until animation finishes
        if (elapsedTime >= attackDuration) {
            // Return to idle or move depending on input
            Vector2 input = new Vector2(Input.GetAxisRaw("Horizontal"), Input.GetAxisRaw("Vertical"));
            if (input.sqrMagnitude > 0.01f)
                character.ChangeState(new CharacterMoveState(character));
            else
                character.ChangeState(new CharacterIdleState(character));
        }
    }
}
