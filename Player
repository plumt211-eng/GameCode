using UnityEngine;

public class Player : Character {
  private Camera mainCamera;

  protected override void Awake() {
    base.Awake();
    mainCamera = Camera.main;
  }

  protected void Update() {
    HandleInput();
  }

  private void HandleInput() {
    float horizontalInput = Input.GetAxis("Horizontal");
    float verticalInput = Input.GetAxis("Vertical");

    Vector3 movement = new Vector3(horizontalInput, 0f, verticalInput);
    body.MovePosition(body.position + movement * moveSpeed * Time.deltaTime);

    float speed = movement.magnitude;
    animator.SetFloat("Speed", speed);

    if (Input.GetKeyDown(KeyCode.Mouse0)) {
      Attack();
    }

    if (Input.GetKeyDown(KeyCode.Space)) {
      Jump();
    }

    if (Input.GetKeyDown(KeyCode.LeftShift)) {
      Vector3 dodgeDirection = new Vector3(Input.GetAxis("Horizontal"), 0f, Input.GetAxis("Vertical"));
      if (dodgeDirection != Vector3.zero) {
        Dodge(dodgeDirection);
      }
    }
  }

  public override void Attack() {
    Debug.Log("Player performs an attack!");
  }

  protected override void Die() {
    Debug.Log("Player has been defeated! Game Over.");
    //Implement game over logic here.
    base.Die(); // Call the base Die method to clean up
  }
}
