using UnityEngine;

[CreateAssetMenu(fileName = "PoisonEffect", menuName = "Status Effects/Poison")]
public class PoisonEffect : StatusEffect {
  public int damagePerSecond = 5;
  private float tickTimer = 1f;

  public override void OnUpdate(float deltaTime) {
    base.OnUpdate(deltaTime);
    tickTimer -= deltaTime;

    if (tickTimer <= 0f) {
      tickTimer = 1f;
      target.TakeDamage(damagePerSecond);
      Debug.Log($"{target.characterName} takes {damagePerSecond} poison damage!");
    }
  }

  public override void OnEnd() {
    base.OnEnd();
    Debug.Log($"target.characterName} is no longer poisoned.");
  }
}
